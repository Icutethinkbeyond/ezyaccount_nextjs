services:
  cutting-system:
    # build:
    #   context: .  # กำหนดว่า context คือโฟลเดอร์ปัจจุบัน (รวม Dockerfile)
    image: thanapongc/project:cutting
    env_file:
      - .env.production
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    container_name: cutting-system
    ports:
      - "3001:3000"  # เชื่อมต่อพอร์ต 3000 ของเครื่องโฮสต์กับพอร์ต 3000 ในคอนเทนเนอร์
    networks:
      - cutting-system
    # depends_on:
    #   - nginx

  #nginx:
    #image: nginx:latest
    #container_name: nginx-proxy-cutting-app-ui
    #ports:
      #- "80:80"  # เปิดพอร์ต 80 สำหรับ Nginx
      #- "443:443"
    #volumes:
      #- ./nginx.conf:/etc/nginx/nginx.conf  # ใช้ไฟล์ nginx.conf ที่กำหนดเอง
      #- ./nginx/logs:/var/log/nginx  # แชร์ log (ถ้าต้องการ)
    #restart: always
    #depends_on:
      #- cutting-app-ui
    #networks:
      #- cutting-ui-network

networks:
  cutting-system:
    driver: bridge
